<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FLASH USDT ‚Äî TRC20 Checkout</title>
  <meta name="description" content="FLASH USDT TRC20 packages ‚Äî fast and cost-efficient plans on the TRON network." />
  <link rel="icon" type="image/png" href="assets/USDT-2.png" />
  <style>
    :root{
      --bg1:#030615; --bg2:#0b1130; --bg3:#0f153d;
      --text:#eef3ff; --muted:#9aa0c2;
      --cyan:#00f0ff; --violet:#5b2cff; --rose:#ff4b9f; --lime:#16d18a; --amber:#ffcc4d;
      --border:rgba(255,255,255,.12); --glass:rgba(255,255,255,.06);
      --panel:#0f1730;
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%}
    body{
      font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 10% -10%, rgba(0,240,255,.14), transparent 55%),
        radial-gradient(900px 500px at 90% 0, rgba(91,44,255,.20), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2) 50%, var(--bg3));
      overflow-x:hidden;
      display:flex; flex-direction:column;
    }

    /* ===== AES Matrix-ish background lines (subtle) ===== */
    .aes-bg{
      position:fixed; inset:0; pointer-events:none; z-index:0; opacity:.12;
      background:
        repeating-linear-gradient(90deg, rgba(255,255,255,.06) 0 1px, transparent 1px 80px),
        repeating-linear-gradient(0deg, rgba(255,255,255,.04) 0 1px, transparent 1px 80px);
      mask: radial-gradient(ellipse at 50% 10%, #000 30%, transparent 70%);
    }

    /* ===== HEADER (no underline) ===== */
    header{position:sticky;top:0;z-index:50;background:rgba(10,15,40,.75);backdrop-filter:blur(16px)}
    .nav{max-width:1200px;margin:0 auto;padding:14px 20px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.4px}
    .brand img{width:28px;height:28px;border-radius:8px}
    .brand span{background:linear-gradient(90deg,var(--cyan),var(--violet));-webkit-background-clip:text;background-clip:text;color:transparent}
    .menu{display:flex;gap:16px}
    .menu a{color:var(--muted);text-decoration:none;font-weight:600}
    .menu a:hover{color:var(--cyan)}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:10px 14px;border-radius:12px;font-weight:700;
      background:linear-gradient(90deg,var(--cyan),var(--violet));color:#fff;text-decoration:none;
      box-shadow:0 10px 22px rgba(0,0,0,.25);transition:.2s;
    }
    .btn:hover{transform:translateY(-2px);opacity:.95}
    .ghost{background:transparent;border:1px solid var(--border);color:#d5dcff}
    .ghost:hover{border-color:#7aa2ff}
    .primary{background:linear-gradient(90deg,#3aa8ff,#7c5cff);border:none}

    /* ===== HERO ===== */
    .hero{
      position:relative; text-align:center; padding:64px 20px 26px; z-index:1;
    }
    .hero h1{
      margin:0 0 8px;
      font-size:clamp(30px,5.5vw,44px);
      font-weight:900; letter-spacing:.5px;
      background:linear-gradient(90deg,#cfe8ff,#93b4ff);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-shadow:0 0 18px rgba(0,240,255,.15);
    }
    .hero p{max-width:880px;margin:8px auto 0;color:#c5cdf2;line-height:1.7}

    /* ===== MAIN LAYOUT ===== */
    main{position:relative;z-index:1; flex:1}
    .wrap{max-width:1200px;margin:0 auto;padding:0 20px}
    .stage{
      /* Height stabilized: footer won't jump */
      min-height: calc(100vh - 200px);
      display:grid; gap:22px;
      grid-template-columns: minmax(0,1fr);
      align-items:start; justify-items:center;
      transition:grid-template-columns .35s ease;
    }
    /* When summary is visible, switch to two columns */
    .stage.with-summary{grid-template-columns:minmax(0,1fr) 380px}

    /* ===== CARDS ===== */
    .card,.panel,.summary{
      position:relative;border-radius:18px;overflow:hidden;
      background:rgba(255,255,255,.04);border:1px solid var(--border);backdrop-filter:blur(14px);
    }
    .pad{padding:20px}

    /* ===== PRODUCTS ===== */
    .products{
      max-width:1000px; margin:10px auto 0;
      display:grid; gap:16px;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      justify-items:stretch; align-items:stretch;
    }
    .product{
      text-align:center; transition:.25s; padding:18px;
    }
    .product:hover{transform:translateY(-6px);box-shadow:0 24px 60px rgba(0,240,255,.08)}
    .product h4{margin:6px 0 6px;font-size:18px}
    .price{font-weight:800;font-size:22px;color:var(--cyan);margin-bottom:6px}
    .amount{font-size:13px;color:#cbd2ff}
    .chip{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.04);font-size:12px;color:#cfd6ff}
    .product .actions{margin-top:10px}

    .title{margin:0 0 10px;font-size:clamp(24px,3.5vw,28px)}
    .sub{color:var(--muted);margin:2px 0 14px;text-align:center}

    /* ===== FIELDS ===== */
    .field{display:flex;gap:10px;align-items:center;margin-top:12px}
    input[type="text"]{
      flex:1;height:46px;border-radius:12px;border:1px solid var(--border);
      background:rgba(255,255,255,.04);color:var(--text);padding:0 12px;outline:none
    }
    input::placeholder{color:#9aa0c2}
    .actions{display:flex;justify-content:center;gap:10px;margin-top:16px;flex-wrap:wrap}

    /* ===== METHODS ===== */
    .methods{
      display:grid; gap:12px;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      max-width:820px; margin:10px auto 0;
    }
    .method{
      cursor:pointer; user-select:none; position:relative;
      display:flex; align-items:center; gap:12px;
      padding:14px; border-radius:14px; border:1px solid var(--border);
      background:rgba(255,255,255,.03); transition:.2s
    }
    .method img{width:24px;height:24px;object-fit:contain}
    .method.active{outline:2px solid rgba(0,240,255,.6);background:rgba(0,240,255,.05)}
    .method.closed{opacity:.6; filter:saturate(.85) grayscale(.1)}
    .method .badge-closed{
      position:absolute; top:6px; right:8px;
      background:#ff4b4b; color:#fff; font-weight:800;
      padding:2px 6px; font-size:10px; border-radius:6px; letter-spacing:.3px;
    }

    /* ===== PAYMENT PANEL ===== */
    .row{display:flex;justify-content:space-between;gap:10px;color:#cfd6ff;font-size:14px;padding:8px 0;border-bottom:1px dashed rgba(255,255,255,.08)}
    .row:last-child{border-bottom:none}
    .copy{cursor:pointer;border:1px solid var(--border);border-radius:10px;padding:6px 10px;background:rgba(255,255,255,.04)}
    .small{font-size:12px;color:#aab2d8}

    /* ===== SUMMARY (hidden until a product selected) ===== */
    aside{display:none}
    .stage.with-summary aside{display:block; position:sticky; top:88px; height:fit-content}
    .summary .head{
      display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:8px
    }
    .summary .kvs{display:grid;gap:6px;margin-top:8px}
    .kv{display:flex;align-items:center;gap:10px;font-size:13px;color:#cfe0ff}
    .kv .k{min-width:120px;color:#93a7ff}
    .summary .shield{
      display:inline-flex;align-items:center;gap:8px;font-weight:700;font-size:12px;
      padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:rgba(255,255,255,.04)
    }
    .slide-in{animation:slideIn .35s ease both}
    @keyframes slideIn{from{opacity:0;transform:translateX(10px)}to{opacity:1;transform:translateX(0)}}

    /* ===== AES ring accent (subtle) ===== */
    .ring{
      position:absolute; inset:-3px; border-radius:inherit; z-index:0;
      background:conic-gradient(from 0deg,var(--cyan),var(--violet),var(--rose),var(--lime),var(--amber),var(--cyan));
      filter:blur(12px); opacity:.85; animation:spin 8s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .card>.ring, .panel>.ring, .summary>.ring{pointer-events:none}

    /* ===== FOOTER ===== */
    footer{border-top:1px solid var(--border); background:linear-gradient(180deg,var(--bg2),var(--bg3)); color:#a9b1c6}
    .foot{max-width:1200px;margin:0 auto;padding:22px 20px;display:flex;flex-wrap:wrap;gap:12px;justify-content:space-between;align-items:center}
    .foot-left{display:flex;align-items:center;gap:10px}
    .foot-left img{width:22px;height:22px;border-radius:6px}

    /* ===== Responsive ===== */
    @media (max-width:960px){
      .stage.with-summary{grid-template-columns:1fr}
      aside{position:relative; top:auto}
    }
  </style>
</head>
<body>
  <div class="aes-bg"></div>

  <!-- NAV -->
  <header>
    <div class="nav">
      <div class="brand"><img src="assets/logo.png" alt=""><div><span>FLASH</span> USDT</div></div>
      <nav class="menu">
        <a href="index.html">Home</a>
        <a href="#steps">Checkout</a>
        <a href="#verify">TXID</a>
      </nav>
      <a class="btn" href="#steps">Get Started</a>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <h1>TRC20 Checkout</h1>
    <p>Choose a package, enter your wallet, pick a payment network, send funds, and submit your TXID. Ultra-low fees, instant confirmations, 24/7 support.</p>
  </section>

  <!-- MAIN -->
  <main class="wrap" id="steps">
    <div class="stage" id="stage">
      <!-- CENTER COLUMN -->
      <section style="width:100%;max-width:1100px">
        <!-- STEP 1: PRODUCTS -->
        <div class="card pad" id="step1">
          <div class="ring"></div>
          <h2 class="title" style="text-align:center">Select Your TRC20 Package</h2>
          <p class="sub">Low fee ‚Ä¢ Instant confirmation ‚Ä¢ 24/7 support</p>

          <div class="products">
            <!-- prices per your request -->
            <article class="panel pad product" data-name="800 FLASH" data-usdt="800" data-price="$99.00">
              <div class="ring"></div>
              <h4>800 FLASH</h4>
              <div class="price">$99.00</div>
              <div class="amount">Amount: 800 USDT</div>
              <div style="margin-top:8px"><span class="chip">TRC20</span> <span class="chip">Instant</span></div>
              <div class="actions"><button class="btn primary select">Select</button></div>
            </article>

            <article class="panel pad product" data-name="1K FLASH" data-usdt="1000" data-price="$180.00">
              <div class="ring"></div>
              <h4>1K FLASH</h4>
              <div class="price">$180.00</div>
              <div class="amount">Amount: 1,000 USDT</div>
              <div style="margin-top:8px"><span class="chip">TRC20</span> <span class="chip">Fast</span></div>
              <div class="actions"><button class="btn primary select">Select</button></div>
            </article>

            <article class="panel pad product" data-name="10K FLASH" data-usdt="10000" data-price="$310.00">
              <div class="ring"></div>
              <h4>10K FLASH</h4>
              <div class="price">$310.00</div>
              <div class="amount">Amount: 10,000 USDT</div>
              <div style="margin-top:8px"><span class="chip">TRC20</span> <span class="chip">Trader</span></div>
              <div class="actions"><button class="btn primary select">Select</button></div>
            </article>

            <article class="panel pad product" data-name="20K FLASH" data-usdt="20000" data-price="$580.00">
              <div class="ring"></div>
              <h4>20K FLASH</h4>
              <div class="price">$580.00</div>
              <div class="amount">Amount: 20,000 USDT</div>
              <div style="margin-top:8px"><span class="chip">TRC20</span> <span class="chip">Priority</span></div>
              <div class="actions"><button class="btn primary select">Select</button></div>
            </article>

            <article class="panel pad product" data-name="50K FLASH" data-usdt="50000" data-price="$1,350.00">
              <div class="ring"></div>
              <h4>50K FLASH</h4>
              <div class="price">$1,350.00</div>
              <div class="amount">Amount: 50,000 USDT</div>
              <div style="margin-top:8px"><span class="chip">TRC20</span> <span class="chip">Business</span></div>
              <div class="actions"><button class="btn primary select">Select</button></div>
            </article>

            <article class="panel pad product" data-name="100K FLASH" data-usdt="100000" data-price="$2,500.00">
              <div class="ring"></div>
              <h4>100K FLASH</h4>
              <div class="price">$2,500.00</div>
              <div class="amount">Amount: 100,000 USDT</div>
              <div style="margin-top:8px"><span class="chip">TRC20</span> <span class="chip">VIP</span></div>
              <div class="actions"><button class="btn primary select">Select</button></div>
            </article>

            <article class="panel pad product" data-name="500K FLASH" data-usdt="500000" data-price="$10,500.00">
              <div class="ring"></div>
              <h4>500K FLASH</h4>
              <div class="price">$10,500.00</div>
              <div class="amount">Amount: 500,000 USDT</div>
              <div style="margin-top:8px"><span class="chip">TRC20</span> <span class="chip">Enterprise</span></div>
              <div class="actions"><button class="btn primary select">Select</button></div>
            </article>

            <article class="panel pad product" data-name="1M FLASH" data-usdt="1000000" data-price="$18,500.00">
              <div class="ring"></div>
              <h4>1M FLASH</h4>
              <div class="price">$18,500.00</div>
              <div class="amount">Amount: 1,000,000 USDT</div>
              <div style="margin-top:8px"><span class="chip">TRC20</span> <span class="chip">Enterprise+</span></div>
              <div class="actions"><button class="btn primary select">Select</button></div>
            </article>
          </div>
        </div>

        <!-- STEP 2: WALLET -->
        <div class="card pad" id="step2" style="display:none">
          <div class="ring"></div>
          <h2 class="title" style="text-align:center">Enter Your Wallet Address</h2>
          <p class="sub">Enter the recipient <b>TRC20</b> wallet address (starts with <b>T...</b>) where your package will be delivered.</p>
          <div class="panel pad" style="margin-top:12px">
            <div class="ring"></div>
            <div class="field">
              <input type="text" id="wallet" placeholder="Your TRC20 wallet address (starts with T...)" />
            </div>
            <div class="small" style="margin-top:6px">Warning: Sending to a wrong address is irreversible.</div>
          </div>
          <div class="actions">
            <button class="btn ghost" data-back>Back</button>
            <button class="btn primary" data-next>Continue</button>
          </div>
        </div>

        <!-- STEP 3: METHOD -->
        <div class="card pad" id="step3" style="display:none">
          <div class="ring"></div>
          <h2 class="title" style="text-align:center">Select Payment Method</h2>
          <p class="sub">Choose the network or provider. Closed methods are shown for clarity.</p>

          <div class="methods">
            <div class="method panel pad" data-method="TRC20">
              <img src="assets/trc20.png" alt=""><div>TRC20 (TRON)</div>
            </div>
            <div class="method panel pad" data-method="ERC20">
              <img src="assets/erc20.png" alt=""><div>ERC20 (Ethereum)</div>
            </div>
            <div class="method panel pad" data-method="BEP20">
              <img src="assets/bep20.png" alt=""><div>BEP20 (BSC)</div>
            </div>

            <div class="method panel pad closed" data-closed="true">
              <span class="badge-closed">CLOSED</span>
              <img src="assets/btc.png" alt=""><div>BTC (Bitcoin)</div>
            </div>
            <div class="method panel pad closed" data-closed="true">
              <span class="badge-closed">CLOSED</span>
              <img src="assets/binance.png" alt=""><div>Binance Pay</div>
            </div>
            <div class="method panel pad closed" data-closed="true">
              <span class="badge-closed">CLOSED</span>
              <img src="assets/okx.png" alt=""><div>OKX Pay</div>
            </div>
          </div>

          <div class="actions">
            <button class="btn ghost" data-back>Back</button>
            <button class="btn primary" data-next>Continue</button>
          </div>
        </div>

        <!-- STEP 4: PAYMENT DETAILS -->
        <div class="card pad" id="step4" style="display:none">
          <div class="ring"></div>
          <h2 class="title" style="text-align:center">Payment Details</h2>
          <p class="sub">Send the package amount to the address below using your selected network only.</p>

          <div class="panel pad" style="margin-top:12px">
            <div class="ring"></div>
            <div class="row"><div>Network</div><div id="sum-network">‚Äî</div></div>
            <div class="row">
              <div>Payment Address</div>
              <div style="display:flex;gap:8px;align-items:center">
                <span id="pay-address" class="small">‚Äî</span>
                <button class="copy" id="copyAddr">Copy</button>
              </div>
            </div>
            <div class="small" style="margin-top:8px">Use the same network you selected. Wrong-network transfers are not recoverable.</div>
          </div>

          <div class="actions">
            <button class="btn ghost" data-back>Back</button>
            <button class="btn primary" data-next>I've Made the Payment</button>
          </div>
        </div>

        <!-- STEP 5: TXID -->
        <div class="card pad" id="step5" style="display:none">
          <div class="ring"></div>
          <h2 class="title" style="text-align:center">Submit Your TXID</h2>
          <p class="sub">After sending, paste your <b>Transaction ID (TXID)</b> from the blockchain explorer.</p>

          <div class="panel pad" style="margin-top:12px">
            <div class="ring"></div>
            <div class="field">
              <input type="text" id="txid" placeholder="Paste your TXID here" />
            </div>
            <div class="actions" style="margin-top:12px">
              <button class="btn ghost" data-back>Back</button>
              <button class="btn primary" id="sendTxid">Submit Transaction</button>
            </div>
            <div class="small" style="margin-top:8px">We do not collect personal data. Only TXID and necessary order info are sent.</div>
          </div>
        </div>
      </section>

      <!-- RIGHT: ORDER SUMMARY (appears after product selection) -->
      <aside id="sideSummary">
        <div class="summary pad slide-in">
          <div class="ring"></div>
          <div class="head">
            <h3 style="margin:0">Order Summary</h3>
            <span class="shield">üîê AES Secure ‚Ä¢ Chain Verified</span>
          </div>
          <div class="kvs">
            <div class="kv"><span class="k">Package</span> <span id="s-name">‚Äî</span></div>
            <div class="kv"><span class="k">USDT Amount</span> <span id="s-amount">‚Äî</span></div>
            <div class="kv"><span class="k">Price</span> <span id="s-price">‚Äî</span></div>
            <div class="kv"><span class="k">Wallet</span> <span id="s-wallet">‚Äî</span></div>
            <div class="kv"><span class="k">Network</span> <span id="s-network">‚Äî</span></div>
            <div class="kv"><span class="k">Pay Address</span> <span id="s-address" class="small">‚Äî</span></div>
            <div class="kv"><span class="k">Est. Fee</span> <span id="s-fee">~0.5‚Äì1.0 USDT (TRC20)</span></div>
            <div class="kv"><span class="k">ETA</span> <span>~30‚Äì120s confirmation</span></div>
            <div class="kv"><span class="k">Timestamp</span> <span id="s-time">‚Äî</span></div>
          </div>
          <div class="actions" style="margin-top:14px">
            <button class="btn ghost" id="changePlan">Change Plan</button>
            <a class="btn primary" href="#step4">Confirm Payment</a>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="foot">
      <div class="foot-left">
        <img src="assets/USDT-2.png" alt="">
        <strong>FLASH USDT</strong> ‚Äî Secure & Encrypted
      </div>
      <div>Contact: <a style="color:#cfe8ff" href="mailto:support@flashusdt.com">support@flashusdt.com</a></div>
      <div>¬© <span id="y"></span> FLASH USDT ‚Äî TRC20</div>
    </div>
  </footer>

  <script>
    // Year
    document.getElementById('y').textContent = new Date().getFullYear();

    // ====== CONFIG ======
    const ADDRS = {
      TRC20: "TXAk3cty1QpM72m9wRgQNwxBzEy3E9SyNU",
      ERC20: "0xE88921A2d0315BF364a768c393D02cDF111A0Bc6",
      BEP20: "0xE88921A2d0315BF364a768c393D02cDF111A0Bc6",
      BTC: "" // closed
    };
    const EMAILJS = {
      SERVICE_ID: "service_ez599kb",   // e.g. "service_XXXX"
      TEMPLATE_ID: "",  // e.g. "template_XXXX"
      PUBLIC_KEY: ""    // e.g. "AbC123..."
    };

    // ====== STATE ======
    const state = {
      productName: null,
      productUSDT: null,
      productPrice: null,
      wallet: null,
      network: null
    };

    // ====== HELPERS ======
    const $ = sel => document.querySelector(sel);
    const stage = $('#stage');
    const steps = ["step1","step2","step3","step4","step5"];

    function showStep(id){
      steps.forEach(s => {
        const el = document.getElementById(s);
        if(!el) return;
        el.style.display = (s === id) ? 'block' : 'none';
      });
      // keep center alignment always; summary toggled separately
      window.scrollTo({top:0, behavior:"smooth"});
    }

    function toggleSummary(show){
      if(show){ stage.classList.add('with-summary'); $('#s-time').textContent = new Date().toLocaleString(); }
      else{ stage.classList.remove('with-summary'); }
    }

    function updateSummary(){
      $('#s-name').textContent   = state.productName || '‚Äî';
      $('#s-amount').textContent = state.productUSDT ? `${Number(state.productUSDT).toLocaleString()} USDT` : '‚Äî';
      $('#s-price').textContent  = state.productPrice || '‚Äî';
      $('#s-wallet').textContent = state.wallet || '‚Äî';
      $('#s-network').textContent= state.network || '‚Äî';
      $('#s-address').textContent= state.network ? (ADDRS[state.network] || '‚Äî') : '‚Äî';

      // Payment panel (step4)
      $('#sum-network').textContent = state.network || '‚Äî';
      $('#pay-address').textContent = state.network ? (ADDRS[state.network] || '‚Äî') : '‚Äî';
    }

    // Copy to clipboard (payment address)
    $('#copyAddr')?.addEventListener('click', ()=>{
      const txt = $('#pay-address').textContent.trim();
      if(!txt || txt==='‚Äî') return alert('No address to copy.');
      navigator.clipboard.writeText(txt).then(()=>alert('Address copied.'));
    });

    // ====== STEP 1: select product ======
    document.querySelectorAll('.product .select').forEach(btn=>{
      btn.addEventListener('click', e=>{
        const card = e.target.closest('.product');
        state.productName = card.dataset.name;
        state.productUSDT = card.dataset.usdt;
        state.productPrice= card.dataset.price;
        updateSummary();
        toggleSummary(true);
        showStep('step2');
      });
    });

    // ====== step navigation ======
    document.querySelectorAll('[data-next]').forEach(b=>{
      b.addEventListener('click', ()=>{
        const current = steps.find(s=>document.getElementById(s).style.display==='block');

        if(current==='step2'){
          const w = $('#wallet').value.trim();
          if(!w){ alert('Please enter your TRC20 wallet address.'); return; }
          state.wallet = w;
          updateSummary();
          showStep('step3');
        }
        else if(current==='step3'){
          if(!state.network){ alert('Please select a payment method.'); return; }
          if(!ADDRS[state.network]){ alert(`${state.network} is currently closed or not configured.`); return; }
          updateSummary();
          showStep('step4');
        }
        else if(current==='step4'){
          showStep('step5');
        }
      });
    });

    document.querySelectorAll('[data-back]').forEach(b=>{
      b.addEventListener('click', ()=>{
        const current = steps.find(s=>document.getElementById(s).style.display==='block');
        if(current==='step2') { showStep('step1'); toggleSummary(false); }
        else if(current==='step3') showStep('step2');
        else if(current==='step4') showStep('step3');
        else if(current==='step5') showStep('step4');
      });
    });

    // Change plan button in summary
    $('#changePlan').addEventListener('click', ()=>{
      showStep('step1');
      toggleSummary(false);
      state.productName = state.productUSDT = state.productPrice = null;
      updateSummary();
    });

    // ====== method selection ======
    document.querySelectorAll('.method').forEach(m=>{
      m.addEventListener('click', ()=>{
        if(m.dataset.closed){ return; }
        document.querySelectorAll('.method').forEach(x=>x.classList.remove('active'));
        m.classList.add('active');
        state.network = m.dataset.method;
        updateSummary();
      });
    });

    // ====== TXID SEND (EmailJS + mailto fallback) ======
    $('#sendTxid').addEventListener('click', async ()=>{
      const txid = ($('#txid').value || '').trim();
      if(!txid){ alert('Please enter your TXID.'); return; }

      const subject = "FLASH USDT ‚Äî New TRC20 Transaction";
      const body =
`üîî A new TRC20 transaction has been submitted

üì¶ Package
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Name: ${state.productName || '‚Äî'}
USDT Amount: ${state.productUSDT ? Number(state.productUSDT).toLocaleString() : '‚Äî'} USDT
Price: ${state.productPrice || '‚Äî'}

üí≥ Payment Details
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Network: ${state.network || '‚Äî'}
Our Payment Address: ${state.network ? (ADDRS[state.network] || '‚Äî') : '‚Äî'}
Recipient Wallet (User): ${state.wallet || '‚Äî'}
TXID: ${txid}
Time: ${new Date().toUTCString()}

üõ† Technical
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
User-Agent: ${navigator.userAgent}
Page: /trc20-checkout.html
`;

      // If EmailJS configured, use it
      if(EMAILJS.SERVICE_ID && EMAILJS.TEMPLATE_ID && EMAILJS.PUBLIC_KEY){
        try{
          if(!window.emailjs){
            const s = document.createElement('script');
            s.src = "https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js";
            document.head.appendChild(s);
            await new Promise(res=> s.onload = res);
            window.emailjs.init(EMAILJS.PUBLIC_KEY);
          }
          await window.emailjs.send(EMAILJS.SERVICE_ID, EMAILJS.TEMPLATE_ID, {
            to_email: "eticin.60@gmail.com",
            subject: subject,
            package_name: state.productName || '‚Äî',
            package_amount: state.productUSDT || '‚Äî',
            package_price: state.productPrice || '‚Äî',
            network: state.network || '‚Äî',
            pay_address: state.network ? (ADDRS[state.network] || '‚Äî') : '‚Äî',
            user_wallet: state.wallet || '‚Äî',
            txid: txid,
            user_agent: navigator.userAgent,
            time: new Date().toLocaleString(),
            full_body: body
          });
          alert("‚úÖ TXID has been sent via EmailJS. Thank you!");
          return;
        }catch(e){
          console.error(e);
          alert("‚ö†Ô∏è EmailJS failed. We'll open your mail app.");
        }
      }

      // Fallback: mailto
      const mailto = `mailto:eticin.60@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
      window.location.href = mailto;
    });

    // Initialize step1 as visible, summary hidden
    showStep('step1');
    toggleSummary(false);
    updateSummary();
  </script>
</body>
</html>
